<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>BhaashaBuddy – Learn Indian Languages</title>
<link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;600;700;800;900&family=Noto+Sans+Devanagari:wght@400;600;700&family=Noto+Sans+Gujarati:wght@400;600;700&display=swap" rel="stylesheet">
<link rel="stylesheet" href="css/styles.css">
</head>
<body>

  <!-- ===================== SITE HEADER (desktop) ===================== -->
  <header class="site-header" id="site-header">
    <a href="#" class="site-logo" onclick="event.preventDefault(); switchTab('home')">BhaashaBuddy</a>
    <nav class="site-nav">
      <a class="nav-item active" data-tab="home" href="#" onclick="event.preventDefault(); switchTab('home')">Home</a>
      <a class="nav-item" data-tab="dictionary" href="#" onclick="event.preventDefault(); switchTab('dictionary')">Dictionary</a>
      <a class="nav-item nav-chapters" data-tab="chapters" href="#" onclick="event.preventDefault(); switchTab('chapters')">Lessons</a>
      <a class="nav-item" data-tab="saved" href="#" onclick="event.preventDefault(); switchTab('saved')">Saved</a>
      <a class="nav-item" data-tab="settings" href="#" onclick="event.preventDefault(); switchTab('settings')">Settings</a>
    </nav>
  </header>

  <!-- ===================== LANGUAGE SELECTION SCREEN ===================== -->
  <div class="screen active" id="screen-lang-select">
    <div class="lang-select-wrap">
      <h1 class="lang-select-title">BhaashaBuddy</h1>
      <p class="lang-select-sub">Choose a language to learn from English</p>
      <div class="lang-options">
        <div class="lang-option" onclick="selectLanguage('marathi')">
          <span class="lang-option-script">मराठी</span>
          <span class="lang-option-name">Marathi</span>
          <span class="lang-option-desc">Learn Marathi with transliteration</span>
        </div>
        <div class="lang-option" onclick="selectLanguage('gujarati')">
          <span class="lang-option-script">ગુજરાતી</span>
          <span class="lang-option-name">Gujarati</span>
          <span class="lang-option-desc">Learn Gujarati with transliteration</span>
        </div>
      </div>
    </div>
  </div>

  <!-- ===================== APP CONTENT (shown after language selected) ===================== -->
  <main class="site-main" id="app-content" style="display:none;">
  <!-- ===================== HOME SCREEN ===================== -->
  <div class="screen active" id="screen-home">
    <div class="topbar">
      <h1 id="home-title">Learn Marathi</h1>
      <div class="sub" id="home-subtitle">मराठी शिका • Phrase categories</div>
    </div>
    <div class="search-wrap">
      <div class="search-box">
        <span class="search-icon"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"><circle cx="11" cy="11" r="8"/><path d="m21 21-4.35-4.35"/></svg></span>
        <input type="text" id="home-search" placeholder="Search English, Hindi or Roman..." oninput="handleHomeSearch(this.value)">
      </div>
    </div>

    <div id="search-results-area" style="display:none">
      <div class="section-label">Search Results</div>
      <div class="search-results" id="search-results-list"></div>
    </div>

    <div id="categories-area">
      <div class="section-label">Phrase Categories</div>
      <div class="cat-grid" id="cat-grid"></div>
    </div>
  </div>

  <!-- ===================== PHRASE LIST SCREEN ===================== -->
  <div class="screen" id="screen-phrases">
    <div class="back-btn" onclick="goBack()">← <span id="phrase-screen-title">Greetings</span></div>
    <div class="section-label" id="phrase-section-label">PHRASES</div>
    <div class="phrase-list" id="phrase-list"></div>
  </div>

  <!-- ===================== RESULT SCREEN ===================== -->
  <div class="screen" id="screen-result">
    <div class="back-btn" onclick="goBackFromResult()">← Back</div>
    <div class="result-card">
      <div class="english-label">You searched</div>
      <div class="result-input-display" id="result-input-display"></div>
      <button class="speaker-btn" onclick="speakMarathi()" title="Pronounce"><svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polygon points="11 5 6 9 2 9 2 15 6 15 11 19 11 5"/><path d="M15.54 8.46a5 5 0 0 1 0 7.07"/><path d="M19.07 4.93a10 10 0 0 1 0 14.14"/></svg></button>
      <div class="result-devanagari" id="result-devanagari"></div>
      <div class="result-roman" id="result-roman"></div>
      <button class="save-btn" id="save-btn" onclick="savePhrase()">Save Phrase</button>
    </div>
    <div style="padding: 0 20px;">
      <div class="section-label">Similar Phrases</div>
      <div class="phrase-list" id="similar-phrases"></div>
    </div>
  </div>

  <!-- ===================== DICTIONARY SCREEN ===================== -->
  <div class="screen" id="screen-dictionary">
    <div class="topbar">
      <h1>Dictionary</h1>
      <div class="sub" id="dict-subtitle">English → Marathi</div>
    </div>
    <div class="search-wrap">
      <div class="search-box">
        <span class="search-icon"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="11" cy="11" r="8"/><path d="m21 21-4.35-4.35"/></svg></span>
        <input type="text" id="dict-search" placeholder="Search words..." oninput="handleDictSearch(this.value)">
      </div>
    </div>
    <div class="dict-list" id="dict-list"></div>
  </div>

  <!-- ===================== SAVED SCREEN ===================== -->
  <div class="screen" id="screen-saved">
    <div class="topbar">
      <h1>Saved</h1>
      <div class="sub">Your bookmarked phrases</div>
    </div>
    <div id="saved-list-wrap"></div>
  </div>

  <!-- ===================== CHAPTERS SCREEN ===================== -->
  <div class="screen" id="screen-chapters">
    <div class="topbar">
      <h1>Lessons</h1>
      <div class="sub">281 chapters • learnmarathiwithkaushik.com</div>
    </div>
    <div class="search-wrap">
      <div class="search-box">
        <span class="search-icon"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="11" cy="11" r="8"/><path d="m21 21-4.35-4.35"/></svg></span>
        <input type="text" id="chapters-search" placeholder="Search lessons..." oninput="handleChaptersSearch(this.value)">
      </div>
    </div>
    <div id="chapters-loading" style="display:none;text-align:center;padding:40px 20px;color:var(--text-muted);font-weight:700;">
      <div class="loading-spinner" style="margin:0 auto 12px;"></div>
      Loading lessons...
    </div>
    <div id="chapters-error" style="display:none;text-align:center;padding:40px 20px;">
      <div class="error-icon" style="margin:0 auto 12px;"><svg width="40" height="40" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"/><line x1="12" y1="9" x2="12" y2="13"/><line x1="12" y1="17" x2="12.01" y2="17"/></svg></div>
      <div style="font-weight:800;color:var(--text);margin-bottom:6px;">Server not running</div>
      <div style="font-size:12px;color:var(--text-muted);font-weight:600;">Run <code style="background:var(--border);padding:2px 6px;border-radius:4px;">python server.py</code> to load chapters</div>
    </div>
    <div class="dict-list" id="chapters-list" style="padding: 0 20px;"></div>
  </div>

  <!-- ===================== CHAPTER DETAIL SCREEN ===================== -->
  <div class="screen" id="screen-chapter-detail">
    <div class="back-btn" onclick="goBackFromChapter()">← <span id="chapter-detail-back-label">Lessons</span></div>
    <div style="padding: 0 20px 20px;">
      <div id="chapter-detail-loading" style="text-align:center;padding:40px 0;color:var(--text-muted);font-weight:700;display:none;">
        <div class="loading-spinner" style="margin:0 auto 12px;"></div>Loading...
      </div>
      <div id="chapter-detail-content" style="display:none;">
        <div style="background:var(--primary-light);border-radius:12px;padding:14px 16px;margin-bottom:16px;">
          <div style="font-size:11px;font-weight:800;color:var(--primary);text-transform:uppercase;letter-spacing:0.8px;margin-bottom:4px;">Chapter <span id="chapter-detail-id"></span></div>
          <div id="chapter-detail-title" style="font-size:17px;font-weight:900;color:var(--text);line-height:1.4;"></div>
        </div>
        <div id="chapter-detail-body" style="
          background:var(--card);
          border-radius:var(--radius);
          padding:20px;
          box-shadow:var(--shadow);
          font-size:14px;
          line-height:1.8;
          color:var(--text);
          font-weight:600;
          word-break:break-word;
        "></div>
        <a id="chapter-detail-link" href="#" target="_blank" style="
          display:block;
          margin-top:14px;
          text-align:center;
          font-size:13px;
          font-weight:700;
          color:var(--primary);
          padding:12px;
          background:var(--primary-light);
          border-radius:50px;
          text-decoration:none;
        ">→ Open original lesson</a>
      </div>
    </div>
  </div>

  <!-- ===================== SETTINGS SCREEN ===================== -->
  <div class="screen" id="screen-settings">
    <div class="topbar">
      <h1>Settings</h1>
    </div>
    <div class="settings-section">
      <div class="settings-label">Language</div>
      <div class="settings-card">
        <div class="settings-row clickable" onclick="changeLanguage()">
          <div class="settings-row-left">
            <div class="settings-row-title">Change language</div>
            <div class="settings-row-sub" id="current-lang-display">Learning Marathi</div>
          </div>
          <span class="settings-arrow">›</span>
        </div>
      </div>

      <div class="settings-label">Offline Data</div>
      <div class="settings-card">
        <div class="settings-row">
          <div class="settings-row-left">
            <div class="settings-row-title">Enable Offline Mode</div>
            <div class="settings-row-sub">Use app without internet</div>
          </div>
          <div class="toggle" id="offline-toggle" onclick="toggleOffline()"></div>
        </div>
      </div>

      <div class="settings-label">App Info</div>
      <div class="settings-card">
        <div class="settings-row">
          <div class="settings-row-left">
            <div class="settings-row-title">Version</div>
          </div>
          <span style="font-size:13px;font-weight:700;color:var(--text-muted)">1.0.0</span>
        </div>
        <div class="settings-row">
          <div class="settings-row-left">
            <div class="settings-row-title">Data Source</div>
            <div class="settings-row-sub" id="data-source-display">learnmarathiwithkaushik.com</div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="toast" id="toast"></div>
  </main>

  <!-- ===================== BOTTOM NAV (mobile) ===================== -->
  <nav class="bottom-nav" id="bottom-nav">
    <div class="nav-item active" data-tab="home" onclick="switchTab('home')">
      <span class="nav-icon"><svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"/><polyline points="9 22 9 12 15 12 15 22"/></svg></span>
      <span class="nav-label">Home</span>
    </div>
    <div class="nav-item" data-tab="dictionary" onclick="switchTab('dictionary')">
      <span class="nav-icon"><svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M4 19.5A2.5 2.5 0 0 1 6.5 17H20"/><path d="M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"/><line x1="8" y1="7" x2="16" y2="7"/><line x1="8" y1="11" x2="16" y2="11"/></svg></span>
      <span class="nav-label">Dictionary</span>
    </div>
    <div class="nav-item nav-chapters" data-tab="chapters" onclick="switchTab('chapters')">
      <span class="nav-icon"><svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"/><path d="M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"/></svg></span>
      <span class="nav-label">Lessons</span>
    </div>
    <div class="nav-item" data-tab="saved" onclick="switchTab('saved')">
      <span class="nav-icon"><svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="m19 21-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2z"/></svg></span>
      <span class="nav-label">Saved</span>
    </div>
    <div class="nav-item" data-tab="settings" onclick="switchTab('settings')">
      <span class="nav-icon"><svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="3"/><path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"/></svg></span>
      <span class="nav-label">Settings</span>
    </div>
  </nav>

<script src="app.js"></script>
</body>
</html>
